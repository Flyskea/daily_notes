在计算机科学中，栈 (Stack) 是一种抽象数据结构，主要针对集合类数据 (最常见的是数组) 进行两种操作：

1. **Push (入栈)**: 将元素添加到集合中
2. **Pop (出栈)**: 将最近加入的元素从集合中删除

![栈的操作 - 执行过程](../picture/c49fbebdc08b80a6d2fd43b3ec331aee_MD5.webp)



如上图所示的栈结构中，初始化栈内元素为 1，紧接着进行了两轮操作:

1. 将元素 2, 3, 4, 5, 6 分别入栈 (也就是图中的 1, 2, 3, 4, 5 对应的小图)
2. 将元素 6, 5, 4, 2, 2 分别出栈 (也就是图中的 6, 7, 8, 9, 10 对应的小图)

因为入栈和出栈的操作顺序正好相反，所以栈的顺序简称为 “后进先出”，单次缩写为 LIFO (Last In, First Out)。

# 🛠️ 容易出错的细节

虽然栈 (Stack) 数据结构简单直观，易于理解，但是实践中还是有几个常见的细节会引发 Bug。

1. 入栈和出栈操作顺序错误
2. **边界异常**: 栈为空时出栈、栈溢出 (栈已满时入栈)
3. 无限循环或递归: 没有及时出栈或者出栈逻辑实现错误
4. 元素类型异常: 入栈之前应该检测元素类型，尤其是当元素为接口类型时，一定要检测入栈元素是否实现了特定接口，避免运行时错误

# [20. 有效的括号](https://leetcode.cn/problems/valid-parentheses/description/)

给定一个只包括 `'('`，`')'`，`'{'`，`'}'`，`'['`，`']'` 的字符串 `s` ，判断字符串是否有效。

有效字符串需满足：

1. 左括号必须用相同类型的右括号闭合。
2. 左括号必须以正确的顺序闭合。
3. 每个右括号都有一个对应的相同类型的左括号。

> **输入：** s = "()"
> **输出：** true

解题思路:

1. 将字符分为两组，左边界组: `( { [`, 右边界组  `) } ]`，并形成映射关系: `( => ), { => }, [ => ]`
2. 声明并初始化一个栈结构，用于存储字符
3. 遍历字符串
	1. 如果当前字符属于左边界组，将其入栈
	2. 如果当前字符属于右边界组，取出栈顶字符
	3. 比较当前字符和栈顶字符是否为映射关系，如果不是，说明字符串不是有效括号，直接返回 false 即可
4. 遍历字符串结束，确认栈是否为空，如果为空，说明字符串是有效括号，如果不为空，说明字符串不是有效括号

```go
// 题解代码
func isValid(s string) bool {
 // 如果 s 的长度为奇数，肯定不是有效括号
 if len(s)&1 == 1 {
  return false
 }

 // 将左右边界字符进行分组并形成映射
 charMap := map[byte]byte{
  '(': ')',
  '{': '}',
  '[': ']',
 } 

 var stack []byte

 for i := range s {
  if _, ok := charMap[s[i]]; ok {
   stack = append(stack, s[i])
  } else {
   index := len(stack) - 1
   if len(stack) == 0 || s[i] != charMap[stack[index]] {
    return false
   }
   stack = stack[:index]
  }
 }

 // 此时栈内可能还存在一些左边界字符
 // 所以需要判断栈是否为空
 return len(stack) == 0
}
```